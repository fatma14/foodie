(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{127:function(e,t,a){},128:function(e,t,a){},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},133:function(e,t,a){},136:function(e,t,a){},137:function(e,t,a){},139:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),o=a(33),s=a.n(o),l=(a(71),a(6)),i=a(7),c=a(9),u=a(8),m=a(10),d=a(19),p=a(26),f=a(58),h=a.n(f),b=a(14),g=a.n(b),E=function(e,t){return g.a.post("/api/auth/signup",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},y=function(e,t){return g.a.post("/api/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},v=a(145),w=a(142),C=a(146),O=a(141),j=(a(91),function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={username:"",password:"",error:""},a.handleChange=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),y(a.state.username,a.state.password).then((function(e){if(e.message)a.setState({error:e.message});else if(a.props.setUser(e),a.props.location.search){var t=decodeURIComponent(a.props.location.search.split("?")[1]),r=h.a.parse(t).redirectTo;a.props.history.push(r)}else a.props.history.push("/offer/create")}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return console.warn(this.props),n.a.createElement("div",{className:"login-background"},n.a.createElement("div",{className:"login-form"},n.a.createElement("div",null,n.a.createElement(v.a,{bg:"light",style:{width:"30rem",height:"25rem",fontSize:"20px",borderRadius:"1rem"}},n.a.createElement(v.a.Header,{style:{fontWeight:"bold"}},"Login"),n.a.createElement(v.a.Body,null,n.a.createElement(w.a,{onSubmit:this.handleSubmit},n.a.createElement(w.a.Group,null,n.a.createElement(w.a.Label,{htmlFor:"username"},"Username "),n.a.createElement(w.a.Control,{style:{borderRadius:"1rem"},type:"text",name:"username",id:"username",value:this.state.username,onChange:this.handleChange})),n.a.createElement(w.a.Group,null,n.a.createElement(w.a.Label,{htmlFor:"password"},"Password "),n.a.createElement(w.a.Control,{style:{borderRadius:"1rem"},type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange})),this.state.error&&n.a.createElement(C.a,{variant:"danger"},this.state.error),n.a.createElement(O.a,{style:{borderRadius:"1rem",border:"2px solid"},variant:"outline-success",className:"login-button",type:"submit"},"Log in")))))))}}]),t}(r.Component)),x=function(e){return g.a.get("/api/offers?swLat=".concat(e.southWest.lat,"&swLng=").concat(e.southWest.lng,"&neLat=").concat(e.northEast.lat,"&neLng=").concat(e.northEast.lng)).then((function(e){return e.data})).catch((function(e){return e.response.data}))},N=function(e,t,a,r,n,o,s){for(var l=[],i=0;i<s.length;i++){var c=new FormData;c.append("imageUrl",s[i]),l.push(S(c))}return Promise.all(l).then((function(s){var l=s.map((function(e){return e.secure_url}));return g.a.post("http:/api/offers",{name:e,price:t,description:a,quantity:r,coordinates:n,tagline:o,imageUrls:l})})).then((function(e){return e.data})).catch((function(e){throw e}))},k=function(e){return g.a.get("/api/offers/".concat(e)).then((function(e){return e.data})).catch((function(e){return e.response.data}))},S=function(e){return g.a.post("/api/upload",e).then((function(e){return e.data}))},L=function(e,t){return g.a.post("/api/orders",{offerId:e,userId:t})},R=a(62),U=a.n(R),D=a(24),q=a.n(D),B=function(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",null,e.offers.name))},F=a(63),T=a.n(F);a(127);q.a.accessToken="pk.eyJ1IjoiZmF0bWExNCIsImEiOiJjazNzbDVwcGYwN24xM2hvNG5ncDlmNDBqIn0.lUgBAvFq5lq9DHoVrK032A";var W=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={zoom:1.5},a.map=void 0,a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.state;this.map=new q.a.Map({container:this.mapContainer,style:"mapbox://styles/mapbox/streets-v9",center:[13.4,52.52]});var t=new U.a({accessToken:q.a.accessToken,mapboxgl:q.a,placeholder:"Search"});this.map.addControl(t),this.map.on("zoomend",(function(){var t=e.map.getBounds();e.props.setBounds&&e.props.setBounds({southWest:t._sw,northEast:t._ne})})),this.map.on("load",(function(){e.map.addSource("single-point",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),t.on("result",(function(t){var a=e.map.getSource("single-point").setData(t.result),r=[a._data.center[0],a._data.center[1]];e.props.setCoordinates&&e.props.setCoordinates(r)}))}))}},{key:"render",value:function(){var e=this;return this.map&&this.props.offers&&this.props.offers.forEach((function(t){var a=(new q.a.Popup).setHTML(T.a.renderToStaticMarkup(n.a.createElement(B,{offers:t})));(new q.a.Marker).setLngLat(t.coordinates).setPopup(a).addTo(e.map)})),n.a.createElement("div",{className:"map"},n.a.createElement("div",{className:"map-container",ref:function(t){return e.mapContainer=t}}))}}]),t}(r.Component),A=(a(128),function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={name:"",price:"",quantity:"",description:"",tagline:"",imageUrl:"",files:void 0,coordinates:[],isLoading:!1,error:void 0},a.setCoordinates=function(e){a.setState({coordinates:e})},a.handleChange=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value))},a.onImageUpload=function(e){console.warn(e.target.files);var t=e.target.files;console.log("file to be uploaded is",t),a.setState({files:t})},a.handleSubmit=function(e){e.preventDefault(),a.setState({isLoading:!0}),N(a.state.name,a.state.price,a.state.description,a.state.quantity,a.state.coordinates,a.state.tagline,a.state.files).then((function(e){a.setState({isLoading:!1}),a.props.history.push("/offer/".concat(e._id))})).catch((function(e){a.setState({isLoading:!1,error:e})}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"create-offer"},n.a.createElement("div",{className:"create-offer-from"},n.a.createElement(v.a,{className:"ml-3",bg:"light",style:{width:"30rem",fontSize:"20px",borderColor:"#28a745",borderWidth:"2px",borderRadius:"1rem"}},n.a.createElement(v.a.Header,{style:{fontWeight:"bold"}},"Create offer"),n.a.createElement(v.a.Body,null,n.a.createElement(w.a,{onSubmit:this.handleSubmit},n.a.createElement(w.a.Group,null,n.a.createElement(w.a.Label,{htmlFor:"name"},"Name: "),n.a.createElement(w.a.Control,{style:{borderRadius:"1rem"},type:"text",name:"name",id:"name",value:this.state.name,onChange:this.handleChange})),n.a.createElement(w.a.Group,null,n.a.createElement(w.a.Label,{htmlFor:"price"},"Price: "),n.a.createElement(w.a.Control,{style:{borderRadius:"1rem"},type:"text",name:"price",id:"price",placeholder:"0\u20ac",value:this.state.price,onChange:this.handleChange})),n.a.createElement(w.a.Group,null,n.a.createElement(w.a.Label,{htmlFor:"quantity"},"Quantity: "),n.a.createElement(w.a.Control,{style:{borderRadius:"1rem"},type:"text",name:"quantity",id:"quantity",value:this.state.quantity,onChange:this.handleChange})),n.a.createElement(w.a.Group,null,n.a.createElement(w.a.Label,{htmlFor:"description"},"Description: "),n.a.createElement(w.a.Control,{style:{borderRadius:"1rem"},type:"text",name:"description",id:"description",value:this.state.description,onChange:this.handleChange})),n.a.createElement(w.a.Group,null,n.a.createElement(w.a.Label,{htmlFor:"description"},"Tagline: "),n.a.createElement(w.a.Control,{style:{borderRadius:"1rem"},type:"text",name:"tagline",id:"tagline",value:this.state.tagline,onChange:this.handleChange})),n.a.createElement(w.a.Group,null,n.a.createElement(w.a.Label,{htmlFor:"file"},"Upload pictures: "),n.a.createElement(w.a.Control,{style:{borderRadius:"1rem"},type:"file",name:"urlPath",id:"urlPath",multiple:!0,onChange:this.onImageUpload})),n.a.createElement(O.a,{style:{borderRadius:"1rem",border:"2px solid"},variant:"outline-success",className:"create-offer-button",type:"submit",disabled:this.state.isLoading},"Create"))))),n.a.createElement(W,{setCoordinates:function(t){e.setCoordinates(t)}}))}}]),t}(r.Component)),G=(a(129),a(144)),I=(a(130),function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={name:"",description:"",quantity:"",price:"",tagline:"",orders:[],files:void 0},a.getData=function(){var e=a.props.match.params.id;k(e).then((function(e){a.setState({name:e.offerDetails.name,description:e.offerDetails.description,quantity:e.offerDetails.quantity,price:e.offerDetails.price,tagline:e.offerDetails.tagline,files:e.offerDetails.imageUrls,orders:e.orders})}))},a.createOrder=function(){var e=a.props.match.params.id,t=a.props.user._id;L(e,t)},a.redirectToLogin=function(){var e=a.props.location.pathname;a.props.history.push("/login?redirectTo=".concat(encodeURIComponent(e)))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this,t=[];return this.state.files&&(t=this.state.files.map((function(e){return n.a.createElement(G.a.Item,null,n.a.createElement("img",{className:"carousel-image d-block w-100",src:e,alt:"First slide"}))}))),n.a.createElement("div",{className:"offer-details-container"},n.a.createElement("div",{className:"carousel-items"},this.state.files&&n.a.createElement(G.a,null,t)),n.a.createElement("div",{className:"reservation-form"},n.a.createElement(v.a,{style:{width:"30rem",fontSize:"20px",borderColor:"#28a745",borderWidth:"2px",borderRadius:"1rem"},className:"text-center"},n.a.createElement(v.a.Header,{style:{fontWeight:"bold"}},this.state.name),n.a.createElement(v.a.Body,null,n.a.createElement(v.a.Text,null,this.state.description),n.a.createElement(v.a.Text,null,"Quantity: ",this.state.quantity),n.a.createElement(v.a.Text,null,"Price: ",this.state.price),this.props.user?this.state.orders.find((function(t){return t.user===e.props.user._id}))?n.a.createElement(C.a,{variant:"warning"},"You already made a reservation!"):n.a.createElement(O.a,{style:{borderRadius:"1rem",border:"2px solid"},variant:"outline-success",className:"reservation-button",onClick:function(){return e.createOrder()}},"Make a reservation"):n.a.createElement(O.a,{style:{borderRadius:"1rem",border:"2px solid"},variant:"outline-success",className:"reservation-button",onClick:function(){e.redirectToLogin()}},"Login in order to make reservation")),n.a.createElement(v.a.Footer,{className:"text-muted"},this.state.tagline))))}}]),t}(r.Component)),M=(a(131),function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).handleClick=function(e){e.preventDefault(),a.props.history.push("/offer/".concat(a.props.offer._id))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"offers-info mt-3 ml-3"},n.a.createElement(v.a,{style:{width:"30rem",borderBottomColor:"grey"}},n.a.createElement(v.a.Img,{variant:"top",src:this.props.offer.imageUrls[0]}),n.a.createElement(v.a.Body,null,n.a.createElement(v.a.Title,null,this.props.offer.name),n.a.createElement(v.a.Text,null," Quantity: ",this.props.offer.quantity," "),n.a.createElement("footer",{className:"blockquote-footer mt-2"},this.props.offer.tagline),n.a.createElement("button",{onClick:this.handleClick,className:"offer-details-button"},"Offer details"))))}}]),t}(r.Component)),H=(a(132),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.offers.map((function(t){return n.a.createElement(M,Object.assign({offer:t},e.props))}));return n.a.createElement("div",{className:"search-offers"},n.a.createElement("div",{className:"offers-list"},t),n.a.createElement("span",null,"You are few minutes away from a delicious meal"),n.a.createElement(W,{offers:this.props.offers,setBounds:function(t){e.props.setBounds(t)}}))}}]),t}(r.Component)),z=a(12),P=(a(133),a(60)),_=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={username:"",password:"",error:""},a.handleChange=function(e){a.setState(Object(p.a)({},e.target.name,e.target.value))},a.handleSubmit=function(e){e.preventDefault(),E(a.state.username,a.state.password).then((function(e){e.message?a.setState({error:e.message}):(a.props.setUser(e),a.props.history.push("/offer/create"))}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement(v.a,{style:{width:"25rem",height:"30rem",fontSize:"20px",borderRadius:"1rem"}},n.a.createElement(v.a.Header,{style:{fontWeight:"bold"}},"Create an account"),n.a.createElement(v.a.Body,null,n.a.createElement(w.a,{onSubmit:this.handleSubmit},n.a.createElement(w.a.Row,{className:"mt-2 mb-2"},n.a.createElement(w.a.Group,{as:P.a},n.a.createElement(w.a.Label,{htmlFor:"username"},"Username "),n.a.createElement(w.a.Control,{style:{borderRadius:"1rem"},type:"text",name:"username",id:"username",value:this.state.username,onChange:this.handleChange})),n.a.createElement(w.a.Group,{as:P.a},n.a.createElement(w.a.Label,{htmlFor:"password"},"Password "),n.a.createElement(w.a.Control,{style:{borderRadius:"1rem"},type:"password",name:"password",id:"password",value:this.state.password,onChange:this.handleChange}))),n.a.createElement(w.a.Group,{className:"mt-3",controlId:"formGridAddress1"},n.a.createElement(w.a.Label,{htmlFor:"address"},"Address"),n.a.createElement(w.a.Control,{style:{borderRadius:"1rem"},type:"address",name:"address",id:"address",value:this.state.address,onChange:this.handleChange,placeholder:"1234 Main St"})),this.state.error&&n.a.createElement(C.a,{variant:"danger"},this.state.error),n.a.createElement(O.a,{style:{borderRadius:"1rem",border:"2px solid"},variant:"outline-success",className:"signup-button",type:"submit"},"Submit")),n.a.createElement("footer",{className:"blockquote-footer mt-2"},"Already have an account? ",n.a.createElement(z.b,{to:"/login"},"Login")))))}}]),t}(r.Component),J=(a(136),function(e){function t(){return Object(l.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{style:{height:"100%"}},n.a.createElement("div",{className:"background"},n.a.createElement("div",{className:"signup-form"},n.a.createElement(_,{setUser:this.props.setUser,history:this.props.history})),n.a.createElement("div",{className:"intro-text"},n.a.createElement(v.a,{className:"mt-5",style:{width:"50rem",backgroundColor:"transparent",color:"white",border:"none"}},n.a.createElement(v.a.Body,null,n.a.createElement(v.a.Title,{style:{fontSize:"30px",fontWeight:"bold"}},"HomeMade"),n.a.createElement(v.a.Text,null,"Throwing food away is bad business. Running out of food during peak hours is also bad business. HomeMade will help you sell your surplus food to people longing for fresh homemade meals."))))),n.a.createElement("footer",{style:{fontSize:"40px"},className:"blockquote-footer mt-5"},"Good Food is all what you need"))}}]),t}(r.Component)),Q=a(143),Y=function(e){return n.a.createElement(Q.a,{className:" nav justify-content-end mt-2 ml-2 mr-2"},e.user?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{style:{color:"black",fontWeight:"bold"},className:"mr-5"},"Hello ",e.user.username),n.a.createElement(O.a,{style:{borderRadius:"1rem",border:"2px solid"},variant:"outline-success"},n.a.createElement(z.b,{style:{color:"black",fontWeight:"bold",textDecoration:"none"},to:"/",onClick:function(){g.a.delete("/api/auth/logout"),e.clearUser(null)}},"Logout")),n.a.createElement("div",{className:"mr-5 ml-5"},n.a.createElement(O.a,{style:{borderRadius:"1rem",border:"2px solid"},variant:"outline-success"},n.a.createElement(z.b,{style:{color:"black",fontWeight:"bold",textDecoration:"none"},to:"/offers/search"},"Offers")))):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"mr-3"},n.a.createElement(O.a,{style:{borderRadius:"1rem",border:"2px solid"},variant:"outline-success"},n.a.createElement(z.b,{style:{color:"black",fontWeight:"bold",textDecoration:"none"},to:"/offers/search"},"Offers"))),n.a.createElement("div",{className:"mr-5 ml-5"},n.a.createElement(O.a,{style:{borderRadius:"1rem",border:"2px solid"},variant:"outline-success"},n.a.createElement(z.b,{style:{color:"black",fontWeight:"bold",textDecoration:"none"},to:"/login"},"Login"))),n.a.createElement("div",{className:"mr-5 ml-5"},n.a.createElement(O.a,{style:{borderRadius:"1rem",border:"2px solid"},variant:"outline-success"},n.a.createElement(z.b,{style:{color:"black",fontWeight:"bold",textDecoration:"none"},to:"/about"},"About Us")))))},V=(a(137),function(){return n.a.createElement("div",null,n.a.createElement(v.a,{className:"mt-5 ml-5 mr-5"},n.a.createElement(v.a.Header,{style:{fontWeight:"bold"}},"About Us"),n.a.createElement(v.a.Body,null,n.a.createElement("blockquote",{className:"blockquote mb-0"},n.a.createElement("p",null,"HomeMade is a web application connecting people who want to make money from their surplus food and reduce food waste at the same time, with consumers that appreciate eating affordable quality food. HomeMade is a location-based web service that enables consumers to find and rescue surplus food in their proximity."),n.a.createElement("footer",{className:"blockquote-footer mt-3"},"Every meal purchased via HomeMade is one less meal thrown away, helping our urban communities to waste less and be more sustainable.")))),n.a.createElement(v.a,{style:{width:"18rem"}},n.a.createElement(v.a.Img,{variant:"bottom",src:"./images/order.jpg"}),n.a.createElement(v.a.Body,null,n.a.createElement(v.a.Title,null,"Pick it up"))))}),K=function(e){function t(){var e,a;Object(l.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={user:a.props.user,offers:[]},a.setUser=function(e){console.warn("setUser App",e),a.setState({user:e})},a.setBounds=function(e){x(e).then((function(e){a.setState({offers:e})}))},a}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return console.log(this.state.user),n.a.createElement("div",{className:"App"},n.a.createElement("div",{className:"App-header"},n.a.createElement("div",{className:"nav-bar"},n.a.createElement(Y,{user:this.state.user,clearUser:this.setUser})),n.a.createElement(d.d,null,n.a.createElement(d.b,{exact:!0,path:"/",render:function(t){return n.a.createElement(J,Object.assign({user:e.state.user,setUser:e.setUser},t))}}),n.a.createElement(d.b,{exact:!0,path:"/offer/create",render:function(t){return e.state.user?n.a.createElement(A,t):n.a.createElement(d.a,{to:"/"})}}),n.a.createElement(d.b,{exact:!0,path:"/offers/search",render:function(t){return n.a.createElement(H,Object.assign({offers:e.state.offers,setBounds:e.setBounds},t))}}),n.a.createElement(d.b,{exact:!0,path:"/offer/:id",render:function(t){return n.a.createElement(I,Object.assign({offers:e.state.offers,user:e.state.user},t))}}),n.a.createElement(d.b,{exact:!0,path:"/login",render:function(t){return n.a.createElement(j,Object.assign({setUser:e.setUser},t))}}),n.a.createElement(d.b,{exact:!0,path:"/about",component:V}))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(138);g.a.get("/api/auth/loggedin").then((function(e){var t=e.data;s.a.render(n.a.createElement(z.a,null,n.a.createElement(K,{user:t})),document.getElementById("root"))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},66:function(e,t,a){e.exports=a(139)},71:function(e,t,a){},91:function(e,t,a){}},[[66,1,2]]]);
//# sourceMappingURL=main.bbac6f9e.chunk.js.map